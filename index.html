# Creating package with sitemap.xml, google verification HTML, press-kit (HTML + PDF fallback), publications JSON-LD, and README
from pathlib import Path
from datetime import datetime
import shutil, json, io, sys

out_dir = Path("/mnt/data/yatharth_assets")
out_dir.mkdir(parents=True, exist_ok=True)

# 1) sitemap.xml
sitemap = f"""<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="https://www.sitemaps.org/schemas/sitemap/0.9">
  <url>
    <loc>https://rampaulsaini.github.io/my-omniverse-store/</loc>
    <lastmod>{datetime.utcnow().date().isoformat()}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>1.0</priority>
  </url>
  <url>
    <loc>https://photos.app.goo.gl/4MP8THuxhei9NuxR6</loc>
    <lastmod>{datetime.utcnow().date().isoformat()}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.7</priority>
  </url>
  <url>
    <loc>https://photos.app.goo.gl/bMoqL2Cx7kKpkmMy6</loc>
    <lastmod>{datetime.utcnow().date().isoformat()}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.7</priority>
  </url>
  <url>
    <loc>https://drive.google.com/drive/folders/18iPsn9Rjc7E0jNwvIx_h5MwQrhqyYt1Y</loc>
    <lastmod>{datetime.utcnow().date().isoformat()}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.7</priority>
  </url>
  <url>
    <loc>https://drive.google.com/drive/folders/1sZEJhlZWFHP7O1kZEINnqFCNgqhOa8XC</loc>
    <lastmod>{datetime.utcnow().date().isoformat()}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.7</priority>
  </url>
  <url>
    <loc>https://drive.google.com/drive/folders/1Ap2N-90wM9R75ffOQAiXczZwNu8dTc7u</loc>
    <lastmod>{datetime.utcnow().date().isoformat()}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.7</priority>
  </url>
</urlset>
"""
(out_dir / "sitemap.xml").write_text(sitemap, encoding="utf-8")

# 2) Google verification HTML sample
google_html = """<!doctype html>
<html><head><meta charset="utf-8"><title>google-site-verification</title></head><body>
Google site verification file - place this in your repo root to verify in Search Console.<br>
Example verification token (replace with the token provided by GSC):<br>
<pre>google-site-verification: google1234567890abcdef.html</pre>
</body></html>
"""
# write a sample filename similar to what GSC might give
(out_dir / "google1234567890abcdef.html").write_text(google_html, encoding="utf-8")

# 3) Press-kit HTML (and try to create a simple PDF fallback)
press_html = """<!doctype html>
<html lang="en">
<head><meta charset="utf-8"><title>Press Kit — Yatharth</title>
<style>body{font-family:Arial,Helvetica,sans-serif;color:#222;background:#fff;padding:24px} h1{color:#b76f00} .muted{color:#666}</style>
</head>
<body>
<h1>Press Kit — Shromani Rampaulsaini (Yatharth)</h1>
<p class="muted">Download & use for media / researchers. Replace placeholders with final assets.</p>

<h2>About</h2>
<p>शिरोमणि रामपुलसैनी — Proponent of Yatharth (निष्पक्ष समझ). Short bio / mission statement here.</p>

<h2>Contact</h2>
<ul>
<li>Email: research@rampaulsaini.github.io</li>
<li>Telegram: https://t.me/sampaulsaini</li>
<li>Phone / Paytm: 8082935186</li>
</ul>

<h2>Key Assets</h2>
<ul>
<li>Portrait photo (high-res): https://i.ibb.co/xqf3kTPS/enhanced-image.webp</li>
<li>Audio MP3 folder: https://photos.app.goo.gl/bMoqL2Cx7kKpkmMy6</li>
<li>Videos folder: https://drive.google.com/drive/folders/1sZEJhlZWFHP7O1kZEINnqFCNgqhOa8XC</li>
<li>Certificates: https://photos.app.goo.gl/hBJ4mN176PboQ7bb6</li>
</ul>

<h2>Claims & Evidence</h2>
<p>Short bullets summarizing claims, available evidence, and steps to request detailed data or collaboration.</p>

<h2>How to Request Collaboration / Verification</h2>
<ol>
<li>Contact via research@rampaulsaini.github.io</li>
<li>Provide institutional credentials and scope of collaboration</li>
<li>Requests for datasets / observational logs will be responded to with access protocols</li>
</ol>

<p style="margin-top:24px" class="muted">Generated: {date}</p>
</body></html>
""".format(date=datetime.utcnow().date().isoformat())

(out_dir / "press-kit.html").write_text(press_html, encoding="utf-8")

# Try to create a simple PDF using reportlab if available; otherwise create a TXT fallback
pdf_path = out_dir / "press-kit.pdf"
pdf_created = False
try:
    from reportlab.lib.pagesizes import A4
    from reportlab.pdfgen import canvas
    c = canvas.Canvas(str(pdf_path), pagesize=A4)
    width, height = A4
    c.setFont("Helvetica-Bold", 16)
    c.drawString(40, height - 60, "Press Kit — Shromani Rampaulsaini (Yatharth)")
    c.setFont("Helvetica", 10)
    lines = [
        "About: शिरोमणि रामपुलसैनी — Proponent of Yatharth (निष्पक्ष समझ).",
        "Contact: research@rampaulsaini.github.io | Telegram: https://t.me/sampaulsaini | Phone: 8082935186",
        "",
        "Assets:",
        "- Portrait: https://i.ibb.co/xqf3kTPS/enhanced-image.webp",
        "- Audio MP3: https://photos.app.goo.gl/bMoqL2Cx7kKpkmMy6",
        "- Videos: https://drive.google.com/drive/folders/1sZEJhlZWFHP7O1kZEINnqFCNgqhOa8XC",
        "- Certificates: https://photos.app.goo.gl/hBJ4mN176PboQ7bb6",
        "",
        "Claims & Evidence: Short bullets summarizing claims, available evidence, and steps to request detailed data or collaboration.",
        "",
        "How to Request Collaboration: Contact via research@rampaulsaini.github.io",
        "",
        f"Generated: {datetime.utcnow().date().isoformat()}"
    ]
    y = height - 90
    for ln in lines:
        c.drawString(40, y, ln)
        y -= 14
        if y < 80:
            c.showPage()
            y = height - 60
    c.save()
    pdf_created = True
except Exception as e:
    # fallback: create a txt file with press content
    (out_dir / "press-kit.txt").write_text("Press kit fallback\n\n" + press_html, encoding="utf-8")
    pdf_created = False

# 4) publications.jsonld example
publications = {
    "@context": "https://schema.org",
    "@graph":[
        {
            "@type":"ScholarlyArticle",
            "@id":"https://rampaulsaini.github.io/my-omniverse-store/#article-example",
            "headline":"Experiential Realization — Pilot Observational Report (Example)",
            "author":{"@type":"Person","name":"Shromani Rampaulsaini"},
            "datePublished":"2025-06-01",
            "publisher":{"@type":"Organization","name":"Yatharth Publications"},
            "isAccessibleForFree":True,
            "url":"https://rampaulsaini.github.io/my-omniverse-store/observational-report",
            "identifier":[{"@type":"PropertyValue","propertyID":"DOI","value":"10.0000/example-doi"}],
            "description":"Example placeholder. Replace with your real paper DOI and abstract."
        }
    ]
}
(out_dir / "publications.jsonld").write_text(json.dumps(publications, indent=2, ensure_ascii=False), encoding="utf-8")

# 5) README with step-by-step instructions for GSC verification and how to use files
readme = f"""Yatharth — SEO & Assets package
Files in this package (path: {out_dir}):
- sitemap.xml                 (place in repo root, submit to Google Search Console)
- google1234567890abcdef.html (sample verification HTML file — replace token filename with the one Search Console provides)
- press-kit.html              (press kit HTML, edit and upload or convert to PDF)
- press-kit.pdf              (PDF generated if environment supports reportlab) {'(created)' if pdf_created else '(not created; press-kit.txt fallback)'} 
- press-kit.txt              (fallback text version of press kit if PDF not generated)
- publications.jsonld         (example JSON-LD for scholarly articles — edit with real DOIs)
- README.txt                  (this file)

Instructions — quick:
1) Copy sitemap.xml to repo root and commit (https://rampaulsaini.github.io/my-omniverse-store/sitemap.xml).
2) In Google Search Console add property with URL prefix: https://rampaulsaini.github.io/my-omniverse-store/
   - Use the provided verification method (HTML file or meta tag). If using HTML file, upload google<token>.html (we provided a sample google1234567890abcdef.html).
   - Or paste the meta tag into <head> of index.html and commit.
3) Submit sitemap in GSC: Use the URL /sitemap.xml
4) Edit press-kit.html (or press-kit.pdf) with final bio and assets. Upload to /press/press-kit.pdf on your repo.
5) If you have real DOIs/publication links, replace placeholders in publications.jsonld and merge into the JSON-LD block in index.html.

Generated: {datetime.utcnow().isoformat()}
"""
(out_dir / "README.txt").write_text(readme, encoding="utf-8")

# Create ZIP
zip_path = Path("/mnt/data/yatharth_assets_bundle.zip")
if zip_path.exists():
    zip_path.unlink()
shutil.make_archive("/mnt/data/yatharth_assets_bundle", 'zip', str(out_dir))

# List files and output zip path
{"files": [p.name for p in sorted(out_dir.iterdir())], "zip": "sandbox:/mnt/data/yatharth_assets_bundle.zip"}
  
